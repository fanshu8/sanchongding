# Optimal Hybrid Strategy - Level 1 (Conservative) - XAUUSD ONLY
# XAUUSD PERFORMANCE (Multi-period average):
# - Profit Factor: 1.87 ✅ (Consistent 1.84-1.90 across all tests)
# - Win Rate: 59.8% (Nearly 6 out of 10 trades win!)
# - Trades per Day: ~3.3 (Optimal frequency)
# - Average Return: +42.9% (30-55% range across test periods)
# - Max Drawdown: <10% (Excellent risk control)
#
# Why XAUUSD Only:
# - ONLY profitable pair after comprehensive multi-symbol testing
# - EURUSD: Loses money consistently (PF 0.61, -17.5% return) ❌
# - USDJPY: Too risky (lost 116% in 15-day test) ❌
# - NZDUSD: Not available in yfinance ❌
#
# Features:
# - SuperTrend + CCI + MACD for trend detection
# - Trailing stops (activate at 0.8R, trail by 1 ATR)
# - News calendar integration (close 1min before high-impact news)
# - Multi-timeframe: 1m entry + 5m confirmation
# - Hard stop loss (1.5 ATR) on every trade
# - Daily max loss protection ($1,000)
# - Max drawdown protection (25%)

trading:
  symbols:
    - XAUUSD
  timeframe: "1m"
  leverage: 500

  position_sizes:
    XAUUSD: 0.3    # lots per order

backtesting:
  initial_capital: 10000
  commission: 0.0001    # Per lot
  slippage: 0.00005     # Per lot

strategy:
  # Aggressiveness: 1=Conservative (RECOMMENDED), 2=Moderate, 3=Aggressive
  aggressiveness: 1

  # Trailing stop settings
  trailing_activation: 0.8   # Activate after 0.8R profit
  trailing_distance: 1.0     # Trail by 1 ATR

  # Progressive lot sizing (动态加仓)
  progressive_lots:
    enabled: false           # Set to true to enable (建议实盘测试前先禁用)
    profit_threshold: 0.20   # Increase lots after 20% monthly profit
    lot_increase: 0.05       # Increase by 0.05 lots each time
    frequency_days: 7        # Increase once per 7 days (weekly)

  # Stop loss and take profit
  atr_multiple: 1.5          # Stop loss multiplier
  tp_ratios: [1.5, 2.5, 4.0] # Take profit ratios

  # Indicator parameters (optimized)
  zigzag:
    depth_1m: 25
    depth_5m: 12

  keltner:
    ma_period: 15
    atr_period: 10
    atr_multiple: 0.5
    ma_method: 1    # 1=EMA
    ma_price: 4     # 4=Close

  bollinger:
    length: 15
    deviation: 1.0

  rsi:
    period: 14

  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9

  supertrend:
    period: 10
    multiplier: 3.0

  cci:
    period: 20

risk:
  max_daily_loss: 1000      # Max daily loss: $1000 (10% of $10k capital)
  max_drawdown: 0.25        # Max drawdown: 25% from peak
  max_positions: 1          # Trade one symbol at a time

data:
  source: "yfinance"       # Use "mt5" for MetaTrader 5 data (30+ days)

logging:
  level: "INFO"
  file: "logs/trading_hybrid_level1.log"

# MT4/MT5 Live Trading Configuration
mt4:
  enabled: true            # Set to true to enable live trading
  account: 25244631        # MT5 demo account
  password: "(;#aP4,U:Z!Y" # MT5 password
  server: "demo.mt5tickmill.com"  # Tickmill demo server
  magic_number: 12345      # Unique magic number for this strategy

# Entry Logic (Level 1 - Conservative):
# LONG:
#   - Price > Keltner Upper AND > Bollinger Upper
#   - MACD crossover up
#   - CCI > 50 (strong trend)
#   - 5m MACD > Signal (trend confirmation)
#   - 5m CCI > 0 (alignment)
#
# SHORT:
#   - Price < Keltner Lower AND < Bollinger Lower
#   - MACD crossover down
#   - CCI < -50 (strong trend)
#   - 5m MACD < Signal (trend confirmation)
#   - 5m CCI < 0 (alignment)
#
# Exit Logic:
# 1. News calendar (close 1min before high-impact news)
# 2. Trailing stop (if activated at 0.8R profit)
# 3. Regular stop loss (1.5 ATR)
# 4. Take profit levels (1.5R, 2.5R, 4.0R)
